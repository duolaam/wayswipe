!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("wayswipe",[],e):"object"==typeof exports?exports.wayswipe=e():t.wayswipe=e()}(window,function(){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var s=e[i]={i:i,l:!1,exports:{}};return t[i].call(s.exports,s,s.exports,n),s.l=!0,s.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)n.d(i,s,function(e){return t[e]}.bind(null,s));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=9)}([function(t,e,n){var i=n(5);"string"==typeof i&&(i=[[t.i,i,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};n(3)(i,s);i.locals&&(t.exports=i.locals)},function(t,e,n){var i=n(8);"string"==typeof i&&(i=[[t.i,i,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};n(3)(i,s);i.locals&&(t.exports=i.locals)},function(t,e){t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var n=function(t,e){var n=t[1]||"",i=t[3];if(!i)return n;if(e&&"function"==typeof btoa){var s=(o=i,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */"),r=i.sources.map(function(t){return"/*# sourceURL="+i.sourceRoot+t+" */"});return[n].concat(r).concat([s]).join("\n")}var o;return[n].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+n+"}":n}).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var i={},s=0;s<this.length;s++){var r=this[s][0];"number"==typeof r&&(i[r]=!0)}for(s=0;s<t.length;s++){var o=t[s];"number"==typeof o[0]&&i[o[0]]||(n&&!o[2]?o[2]=n:n&&(o[2]="("+o[2]+") and ("+n+")"),e.push(o))}},e}},function(t,e,n){var i,s,r={},o=(i=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===s&&(s=i.apply(this,arguments)),s}),a=function(t){var e={};return function(t,n){if("function"==typeof t)return t();if(void 0===e[t]){var i=function(t,e){return e?e.querySelector(t):document.querySelector(t)}.call(this,t,n);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(t){i=null}e[t]=i}return e[t]}}(),c=null,l=0,f=[],h=n(6);function u(t,e){for(var n=0;n<t.length;n++){var i=t[n],s=r[i.id];if(s){s.refs++;for(var o=0;o<s.parts.length;o++)s.parts[o](i.parts[o]);for(;o<i.parts.length;o++)s.parts.push(w(i.parts[o],e))}else{var a=[];for(o=0;o<i.parts.length;o++)a.push(w(i.parts[o],e));r[i.id]={id:i.id,refs:1,parts:a}}}}function p(t,e){for(var n=[],i={},s=0;s<t.length;s++){var r=t[s],o=e.base?r[0]+e.base:r[0],a={css:r[1],media:r[2],sourceMap:r[3]};i[o]?i[o].parts.push(a):n.push(i[o]={id:o,parts:[a]})}return n}function d(t,e){var n=a(t.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var i=f[f.length-1];if("top"===t.insertAt)i?i.nextSibling?n.insertBefore(e,i.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),f.push(e);else if("bottom"===t.insertAt)n.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var s=a(t.insertAt.before,n);n.insertBefore(e,s)}}function v(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=f.indexOf(t);e>=0&&f.splice(e,1)}function m(t){var e=document.createElement("style");if(void 0===t.attrs.type&&(t.attrs.type="text/css"),void 0===t.attrs.nonce){var i=function(){0;return n.nc}();i&&(t.attrs.nonce=i)}return b(e,t.attrs),d(t,e),e}function b(t,e){Object.keys(e).forEach(function(n){t.setAttribute(n,e[n])})}function w(t,e){var n,i,s,r;if(e.transform&&t.css){if(!(r="function"==typeof e.transform?e.transform(t.css):e.transform.default(t.css)))return function(){};t.css=r}if(e.singleton){var o=l++;n=c||(c=m(e)),i=g.bind(null,n,o,!1),s=g.bind(null,n,o,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(t){var e=document.createElement("link");return void 0===t.attrs.type&&(t.attrs.type="text/css"),t.attrs.rel="stylesheet",b(e,t.attrs),d(t,e),e}(e),i=function(t,e,n){var i=n.css,s=n.sourceMap,r=void 0===e.convertToAbsoluteUrls&&s;(e.convertToAbsoluteUrls||r)&&(i=h(i));s&&(i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(s))))+" */");var o=new Blob([i],{type:"text/css"}),a=t.href;t.href=URL.createObjectURL(o),a&&URL.revokeObjectURL(a)}.bind(null,n,e),s=function(){v(n),n.href&&URL.revokeObjectURL(n.href)}):(n=m(e),i=function(t,e){var n=e.css,i=e.media;i&&t.setAttribute("media",i);if(t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}.bind(null,n),s=function(){v(n)});return i(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;i(t=e)}else s()}}t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=o()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var n=p(t,e);return u(n,e),function(t){for(var i=[],s=0;s<n.length;s++){var o=n[s];(a=r[o.id]).refs--,i.push(a)}t&&u(p(t,e),e);for(s=0;s<i.length;s++){var a;if(0===(a=i[s]).refs){for(var c=0;c<a.parts.length;c++)a.parts[c]();delete r[a.id]}}}};var y,x=(y=[],function(t,e){return y[t]=e,y.filter(Boolean).join("\n")});function g(t,e,n,i){var s=n?"":i.css;if(t.styleSheet)t.styleSheet.cssText=x(e,s);else{var r=document.createTextNode(s),o=t.childNodes;o[e]&&t.removeChild(o[e]),o.length?t.insertBefore(r,o[e]):t.appendChild(r)}}},function(t,e,n){"use strict";var i=n(0);n.n(i).a},function(t,e,n){(t.exports=n(2)(!1)).push([t.i,"\n.vswipe-item{\n    position: relative;\n}\n.vswipe-item-inner {\n    font-size: 16px;\n    padding-left: 20px;\n}\n.vswipe-btn {\n    display: flex;\n    align-items: center;\n    position: absolute;\n    top: 0;\n    left: 100%;\n    height: 100%;\n    text-align: left;\n    font-size: 16px;\n}\n.vswipe-btn .text {\n    flex: 1;\n    padding: 0 20px;\n    white-space: nowrap;\n    color: #fff;\n}\n",""])},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var n=e.protocol+"//"+e.host,i=n+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var s,r=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(r)?t:(s=0===r.indexOf("//")?r:0===r.indexOf("/")?n+r:i+r.replace(/^\.\//,""),"url("+JSON.stringify(s)+")")})}},function(t,e,n){"use strict";var i=n(1);n.n(i).a},function(t,e,n){(t.exports=n(2)(!1)).push([t.i,"\n.vswipe {\n    overflow: hidden;\n}\n.vswipe-enter-active, .vswipe-leave-active {\n    transition: all 0.3s\n}\n.vswipe-item-inner {\n    transition: all 0.3s;\n}\n.vswipe-enter .vswipe-item-inner, .vswipe-leave-to .vswipe-item-inner {\n    height: 0;\n}\n",""])},function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"vswipe"},[t._t("default",[n("transition-group",{attrs:{name:"vswipe",tag:"ul"}},t._l(t.data,function(e,i){return n("li",{key:e.item.value},[n("swipe-item",{attrs:{btns:e.btns,item:e.item,index:i,"auto-shrink":t.autoShrink}})],1)}),0)])],2)};i._withStripped=!0;var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"swipeItem",staticClass:"vswipe-item",on:{transitionend:t.onTransitionEnd,touchstart:t.onTouchStart,touchmove:t.onTouchMove,touchend:t.onTouchEnd}},[t._t("default",[n("div",{staticClass:"vswipe-item-inner",on:{click:t.clickItem}},[n("span",[t._v(t._s(t.item.text))])])]),t._v(" "),n("ul",{staticClass:"vswipe-btns"},t._l(t.btns,function(e){return n("li",{ref:"btns",refInFor:!0,staticClass:"vswipe-btn",style:t.genBtnStyl(e),on:{click:function(n){return n.preventDefault(),n.stopPropagation(),t.clickBtn(e)}}},[n("span",{staticClass:"text"},[t._v(t._s(e.text))])])}),0)],2)};s._withStripped=!0;var r=function(t){return{top:t.offsetTop,left:t.offsetLeft,width:t.offsetWidth,height:t.offsetHeight}},o=function(){var t=document.createElement("div").style,e={standard:"transform",webkit:"webkitTransform",Moz:"MozTransform",O:"OTransform",ms:"msTransform"};for(var n in e)if(void 0!==t[e[n]])return n;return!1}(),a=function(t){return!1!==o&&("standard"===o?"transitionEnd"===t?"transitionend":t:o+t.charAt(0).toUpperCase()+t.substr(1))},c=function(){return window.performance&&window.performance.now?window.performance.now()+window.performance.timing.navigationStart:+new Date},l=a("transform"),f=a("transitionProperty"),h=a("transitionDuration"),u=a("transitionTimingFunction"),p={name:"vswipeItem",inject:["swipe"],props:{item:{type:Object,default:function(){return{}}},index:{type:Number,index:-1},autoShrink:{type:Boolean,default:!0}},data:function(){return{btns:[{action:"top",text:"置顶",color:"#959CAB"},{action:"delete",text:"删除",color:"#F65252"}],option:"top"}},watch:{btns:function(){var t=this;this.$nextTick(function(){t.refresh()})}},created:function(){this.x=0,this.state=0,this.swipe.addItem(this)},mounted:function(){var t=this;this.scrollerStyle=this.$refs.swipeItem.style,this.$nextTick(function(){t.refresh()}),this.$on("scroll",this._handleBtns)},methods:{_initCachedBtns:function(){this.cachedBtns=[];for(var t=this.btns.length,e=0;e<t;e++)this.cachedBtns.push({width:r(this.$refs.btns[t-1]).width})},_handleBtns:function(t){if(0!==this.btns.length)for(var e=this.$refs.btns.length,n=0,i=-this.maxScrollX,s=0;s<e;s++){var r=this.$refs.btns[s],o=(i-n)/i,a=void 0,c=o*t-t;a=t<this.maxScrollX?this.cachedBtns[s].width+o*(this.maxScrollX-t):this.cachedBtns[s].width,n+=this.cachedBtns[s].width,r.style.width=a+"px",r.style[l]="translate("+c+"px)",r.style[h]="0ms"}},_isInBtns:function(t){for(var e=t,n=!1;e&&e.className.indexOf("swipe-item")<0;){if(e.className.indexOf("swipe-btns")>=0){n=!0;break}e=e.parentNode}return n},_calculateBtnsWidth:function(){for(var t=0,e=this.cachedBtns.length,n=0;n<e;n++)t+=this.cachedBtns[n].width;this.maxScrollX=-t},_translate:function(t,e){var n=e?" translateZ(0)":"";this.scrollerStyle[l]="translate("+t+"px,0)"+n,this.x=t},_transitionProperty:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"transform";this.scrollerStyle[f]=t},_transitionTimingFunction:function(t){this.scrollerStyle[u]=t},_transitionTime:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.scrollerStyle[h]=t+"ms"},_getComputedPositionX:function(){var t=window.getComputedStyle(this.$refs.swipeItem,null);return+((t=t[l].split(")")[0].split(", "))[12]||t[4])},_translateBtns:function(t,e,n){if(0!==this.btns.length){var i=this.btns.length;"top"==this.option&&(i=this.$refs.btns.length);for(var s=0,r=0,o=0;o<i;o++){var a=this.$refs.btns[o];r=1===this.state?s:0,s+=this.cachedBtns[o].width,a.style[l]="translate("+r+"px,0) translateZ(0)",a.style[f]="all",a.style[u]=e,a.style[h]=t+"ms",n&&(a.style.width=this.cachedBtns[o].width+"px")}}},refresh:function(){this.btns.length>0&&(this._initCachedBtns(),this._calculateBtnsWidth()),this.endTime=0},shrink:function(){var t=this;this.stop(),this.state=0,this.$nextTick(function(){t.scrollTo(0,600,"cubic-bezier(0.165, 0.84, 0.44, 1)"),t._translateBtns(600,"cubic-bezier(0.165, 0.84, 0.44, 1)"),setTimeout(function(){t.btns=[{action:"top",text:"置顶",color:"#959CAB"},{action:"delete",text:"删除",color:"#F65252"}]},600)})},grow:function(){this.state=1;var t=this.x<this.maxScrollX,e="cubic-bezier(0.22, 0.61, 0.36, 1)";this.scrollTo(this.maxScrollX,600,e),this._translateBtns(600,e,t)},scrollTo:function(t,e,n){this._transitionProperty(),this._transitionTimingFunction(n),this._transitionTime(e),this._translate(t,!0),e&&(this.isInTransition=!0)},genBtnStyl:function(t){return"background: "+t.color},clickItem:function(){this.swipe.onItemClick(this.item,this.index),this.$emit("item-click",this.item,this.index)},clickBtn:function(t){if(this.option=t.action,"delete"==t.action){var e=r(this.$refs.btns[0]).width;this.btns=[{action:"confirmdelete",text:"确认删除",color:"#F65252"}],this.$refs.btns[0].style.width=2*e+"px"}else console.log("btn-click"),this.$emit("btn-click",t,this.index),"top"==t.action&&this.autoShrink&&this.shrink()},stop:function(){if(this.isInTransition){this.isInTransition=!1;var t=0===this.state?0:this._getComputedPositionX();this._translate(t),this.$emit("scroll",this.x)}},onTouchStart:function(t){var e=this;this.swipe.onItemActive(this.index),this.$emit("active",this.index),this.stop(),this.moved=!1,this.movingDirectionX=0;var n=t.touches[0];this.pointX=n.pageX,this.pointY=n.pageY,this.distX=0,this.distY=0,this.startX=this.x,this._transitionTime(),this.startTime=c(),1!==this.state||this._isInBtns(t.target)||(this.shrinkTimer=setTimeout(function(){e.shrink()},300))},onTouchMove:function(t){if(this.moved&&(clearTimeout(this.shrinkTimer),t.stopPropagation()),!this.isInTransition){t.preventDefault();var e=t.touches[0],n=e.pageX-this.pointX,i=e.pageY-this.pointY;this.pointX=e.pageX,this.pointY=e.pageY,this.distX+=n,this.distY+=i;var s=Math.abs(this.distX);if(!(s+5<=Math.abs(this.distY))){var r=c();if(!(r-this.endTime>300&&s<15)){this.movingDirectionX=n>0?-1:n<0?1:0;var o=this.x+n;o>0&&(o=0),o<this.maxScrollX&&(o=this.x+n/3),this.moved||(this.moved=!0),this._translate(o,!0),r-this.startTime>300&&(this.startTime=r,this.startX=this.x),this.$emit("scroll",this.x)}}}},onTouchEnd:function(){if(this.moved)if(-1!==this.movingDirectionX){this.endTime=c();var t=this.endTime-this.startTime,e=Math.abs(this.x-this.startX);t<300&&e>15||this.x<this.maxScrollX/2?this.grow():this.shrink()}else this.shrink()},onTransitionEnd:function(){this.isInTransition=!1,this._transitionTime(),this._translate(this.x)}},beforeDestroy:function(){this.swipe.removeItem(this)}};n(4);function d(t,e,n,i,s,r,o,a){var c,l="function"==typeof t?t.options:t;if(e&&(l.render=e,l.staticRenderFns=n,l._compiled=!0),i&&(l.functional=!0),r&&(l._scopeId="data-v-"+r),o?(c=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),s&&s.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(o)},l._ssrRegister=c):s&&(c=a?function(){s.call(this,this.$root.$options.shadowRoot)}:s),c)if(l.functional){l._injectStyles=c;var f=l.render;l.render=function(t,e){return c.call(e),f(t,e)}}else{var h=l.beforeCreate;l.beforeCreate=h?[].concat(h,c):[c]}return{exports:t,options:l}}var v=d(p,s,[],!1,null,null,null);v.options.__file="src/components/vswipeItem.vue";var m=v.exports,b={name:"vswipe",provide:function(){return{swipe:this}},props:{data:{type:Array,default:function(){return[]}},autoShrink:{type:Boolean,default:!1}},created:function(){this.activeIndex=-1,this.items=[]},methods:{addItem:function(t){this.items.push(t)},removeItem:function(t){var e=this.items.indexOf(t);this.items.splice(e,1),e<=this.activeIndex&&(this.activeIndex-=1)},onItemClick:function(t,e){this.$emit("item-click",t,e)},onBtnClick:function(t,e){var n=this.data[e];this.$emit("btn-click",t,e,n)},onItemActive:function(t){if(t!==this.activeIndex){if(-1!==this.activeIndex)this.items[this.activeIndex].shrink();this.activeIndex=t}}},components:{SwipeItem:m}},w=(n(7),d(b,i,[],!1,null,null,null));w.options.__file="src/components/vswipe.vue";var y=w.exports;n.d(e,"vswipe",function(){return y}),n.d(e,"vswipeItem",function(){return m})}])});